## Traffic Lane Recognition using Edge Detection and the Hough Transform
Traffic lane markings can be detected from image or video capture. Below is a typical implementation, where the overlaid white lines have been generated by the algorithm described below and in further detail at [www.lrgonzales.com/traffic-lane-recognition](http://www.lrgonzales.com/traffic-lane-recognition).

<p align="center">
  <img src="https://user-images.githubusercontent.com/4633154/38846095-7fe42122-41c8-11e8-9755-01c13528094b.jpg" width="480px" height="270px"/>
</p>

### Algorithm
The algorithm has three steps, summarized below.

* Color enhancement and grayscale conversion
* Edge detection
* Hough transform for linear feature identification

To aid edge detection, pixels in the image that can be considered yellow or white were enhanced (overwritten to pure white). The Boolean masking was achieved by converting the input from RGB colorspace to HSL colorspace.

The Canny edge detector, `cv2.Canny`, was chosen for edge detection, particularly because edges in the input image are reduced to single-pixel width lines, a useful feature for the subsequent Hough transform processing. The Hough transform, `cv2.HoughLinesP`, then evaluates these identified edges pixel-by-pixel and extracts lines (lane marking) according to specific input parameters.

To gain experience with the implementation details of edge detection and the Hough transform, I implemented my own methods (`src/edge_det.py` and `src/hough.py`). Edge detection proved to be a very mechanical process, where kernel convolution produced horizontal and vertical gradients and these gradients were then combined with non-maximum suppression and thresholding to produce an output image. On the other hand, the Hough transform was challenging to implement in a computationally-efficient manner. Ultimately, I implemented a variation of the [Progressive Probabilistic Hough Transform](http://cmp.felk.cvut.cz/~matas/papers/matas-bmvc98.pdf).

### Usage
Given the directory structure of the repository, particularly `input/image.jpg`, the program may be executed at the command line with `python lane_recog.py input/image.jpg`. 

### Improvements
Throughout the design, it became apparent that the methods used were reliant on a fairly smooth road free of obstacles and relatively free of debris. For this reason, the input was preprocessed with a Gaussian blur. However, a Gaussian blur may not be enough for some unusual road surfaces or when a large debris is present.

The `src/` implementation of the Hough transform could benefit from an accumulator not implemented as a `list`. Doing so would likely result in on-par performance to the OpenCV implementation.

The literature suggests that a fraction of the remaining pixels after edge detection may be able to be ignored. `src/hough.py` does consider all white pixels post-edge detection. Improved implementations may consider the trade-off between the fraction of ignored pixels and accuracy.

### Dependencies
`lane_recog.py` makes use of `numpy`, `matplotlib`, `cv2`, and `moviepy` (for `.mp4` input files).
